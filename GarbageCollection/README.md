# 垃圾回收

## 主要分类
`Workstation` 和 `Server` 两种模式

Workstation(默认配置) 
*   主要为客户端设计
*   用户线程触发
*   优先级一般（会等待其他线程执行后再进行GC）
*   单核时仅支持此模式

Server
* 垃圾回收有专用线程执行，并且线程具有最高的优先级
* 每一个CPU都会有一个堆以及专用的垃圾回收线程，每个堆分为 小对象堆(small object heap) 和 大对象堆(a large object heap)，堆之间可以互相引用
* 回收更快(因为使用了多线程)
* Server模式具有更大的Segments(我也不知道是啥，等待完善)
* Server模式的垃圾回收，是CPU密集型的。如果机器上多个进程都启用Server模式，垃圾回收时他们可能会互相干扰

## 回收过程
* 遍历堆，标记未被引用的对象
* 擦除标记的对象
* 整理

## 分代回收
垃圾回收器定义了三代对象: gen0(第0代), gen1(第1代), gen2(第2代)

大多对象都在 gen0  被回收, gen0 会根据其存活时间被提升为 gen1 至 gen2

gen1 回收触发时，也会触发 gen0 回收, gen2 回收也会触发 gen1, gen0 的回收

从 gen0 到 gen2 回收效率依次降低

## 大对象回收
85,000字节 以上的对象会被认为是大对象(通常是数组)

大对象会直接分配在第二代对象上

他们通常维护着大量的引用所以在回收时需要消耗较大的性能消耗
